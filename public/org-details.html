<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Organization Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script>
    function showPrev(fileRef, prevRef) {
      const [file] = fileRef.files
      if (file) {
        prevRef.src = URL.createObjectURL(file)
      }
    }
  </script>
  <script>
    $(document).ready(function () {

      $("#SearchBtn").click(function () {

        let obj4 = {
          type: "get",
          url: "/do-search",
          data: {
            txtEmail3: $("#txtEmail3").val()
          }
        }
        $.ajax(obj4).then(
          function (responseJsonAry) {

            // alert(responseJsonAry);
            // alert(JSON.stringify(responseJsonAry));
            $("#hdn").val(responseJsonAry[0].Registration_Certificate);
            $("#prev").prop("src", responseJsonAry[0].Registration_Certificate);
            let txtOrgName = responseJsonAry[0].Organisation_Name;
            let txtRegNumber = responseJsonAry[0].Registration_Number;
            let txtAddress = responseJsonAry[0].Address;
            let txtCity = responseJsonAry[0].City;
            let txtState = responseJsonAry[0].State;
            let txtDealsInSports = responseJsonAry[0].Deals_In_Sports;
            let txtHead = responseJsonAry[0].Head;
            let txtWebsite = responseJsonAry[0].Website;
            let txtInsta = responseJsonAry[0].Insta;
            let txtContact = responseJsonAry[0].Contact;
            let txtComments = responseJsonAry[0].Comments;

              $("#txtOrgName").val(txtOrgName),
              $("#txtRegNumber").val(txtRegNumber),
              $("#txtAddress").val(txtAddress),
              $("#txtCity").val(txtCity),
              $("#txtState").val(txtState),
              $("#txtDealsInSports").val(txtDealsInSports),
              $("#txtHead").val(txtHead),
              $("#txtWebsite").val(txtWebsite),
              $("#txtInsta").val(txtInsta),
              $("#txtContact").val(txtContact),
              $("#txtComments").val(txtComments)

          }).fail(function (err) {

            alert(err.message);

          })
      })

    })
  </script>
  <script>
    function showUser() {
      let activeUser = localStorage.getItem("activeUser");
      document.getElementById("txtEmail3").value = activeUser;
    }
  </script>
  </script>
</head>

<body style="background-color: black;" onload="showUser();">

  <input type="hidden" id="hdn" name="hdn">

  <nav class="navbar" style="line-height: .5vh;background-color: #FF0090;">
    <div class="container-fluid">
      <div class="ms-1" style="width: 40rem;">
        <div class="ms-1">
          <a href="./images/download (5).jpeg">
            <img src="./images/download (5).jpeg" alt=""
              style="border-radius: 50%;background-color: white;height: 3vh;float: left;">
          </a>
        </div>
        <span class="navbar-brand ms-2"
          style="font-style: italic;color: white;float: left;font-size: 17px;margin-top: .5vh;">www.VictoryVault.com</span>
      </div>
    </div>
  </nav>

  <div class="container mt-5 mb-5" style="border: 2px black solid;background-color: rgb(204, 201, 201);">

    <div class="col-md-12 text-white" style="background-color: #FF0090;">
      <center class="mt-3">
        <h1 class="display-5 pb-3 pt-2" style="font-weight: 500;">Organisation Details</h1>
      </center>
    </div>

    <form class="row g-3" action="/do-send-to-server" enctype="multipart/form-data" method="post">
      <div class="row mt-4">
        <div class="col-md-6">
          <label for="txtEmail3" class="form-label">Email ID</label>
          <input type="email" class="form-control" id="txtEmail3" name="txtEmail3">
        </div>
        <div class="col-md-3 offset-md-2 mt-4">
          <button type="button" class="btn" style="background-color: #FF0090; font-weight: bold;" id="SearchBtn">Search</button>
        </div>
      </div>
      <div class="col-md-6">
        <label for="txtOrgName" class="form-label">Organisation Name</label>
        <input type="text" class="form-control" id="txtOrgName" name="txtOrgName" required>
      </div>
      <div class="col-md-6">
        <label for="txtRegNumber" class="form-label">Registration Number</label>
        <input type="text" class="form-control" id="txtRegNumber" name="txtRegNumber" required>
      </div>
      <div class="col-md-4">
        <label for="txtAddress" class="form-label">Address</label>
        <input type="text" class="form-control" id="txtAddress" name="txtAddress" required>
      </div>
      <div class="col-md-4">
        <label for="txtCity" class="form-label">City</label>
        <input type="text" class="form-control" id="txtCity" name="txtCity" required>
      </div>
      <div class="col-md-4">
        <label for="txtState" class="form-label">State</label>
        <input type="text" class="form-control" id="txtState" name="txtState" required>
      </div>
      <div class="col-md-4">
        <label for="txtDealsInSports" class="form-label">Deals in Sports</label>
        <input type="text" class="form-control" id="txtDealsInSports" name="txtDealsInSports" required>
      </div>
      <div class="col-md-4">
        <label for="txtHead" class="form-label">Head of Organisation / Host Name</label>
        <input type="text" class="form-control" id="txtHead" name="txtHead" required>
      </div>
      <div class="col-md-4">
        <label for="txtContact" class="form-label">Contact Number</label>
        <input type="text" class="form-control" id="txtContact" name="txtContact" required>
      </div>
      <div class="col-md-6">
        <label for="txtWebsite" class="form-label">Website Link</label>
        <input type="text" class="form-control" id="txtWebsite" name="txtWebsite" placeholder="" required>
      </div>
      <div class="col-md-6">
        <label for="txtInsta" class="form-label">Instagram Link</label>
        <input type="text" class="form-control" id="txtInsta" name="txtInsta" placeholder="" required>
      </div>
      <div class="row mt-3">
        <div class="mb-3 col-md-6">
          <label for="RegCertificate" class="form-label">Registration Certificate</label>
          <input type="file" class="form-control" id="RegCertificate" name="RegCertificate"
            onchange="showPrev(RegCertificate,prev)">
        </div>
        <div class="mb-3 col-md-4 offset-md-2">
          <img src="" width="100" height="100" id="prev" alt="" required
            style="border: 1px black solid;background-color: white;">
        </div>
      </div>
      <label for="txtComments" class="form-label">Comments</label>
      <div class="form-floating mb-3 mt-1">
        <textarea class="form-control" placeholder="Leave a comment here" id="txtComments" name="txtComments" required
          style="height: 100px"></textarea>
        <label for="txtComments">Comments</label>
      </div>
      <div class="col-md-2 mb-3">
        <button type="submit" class="btn" style="background-color: #FF0090; font-weight: bold;" id="ServerBtn">Send to Server</button>
      </div>
      <div class="col-md-1 mb-3">
        <button type="submit" class="btn" style="background-color: #FF0090; font-weight: bold;" id="ModifyBtn" formaction="/Modify-user">Modify</button>
      </div>
    </form>

  </div>

  <nav class="navbar" style="line-height: .5vh;background-color: #FF0090;">
    <div class="container-fluid">
      <div class="ms-1" style="width: 40rem;">
        <div class="ms-1">
          <a href="./images/download (5).jpeg">
            <img src="./images/download (5).jpeg" alt=""
              style="border-radius: 50%;background-color: white;height: 3vh;float: left;">
          </a>
        </div>
        <span class="navbar-brand ms-2"
          style="font-style: italic;color: white;float: left;font-size: 17px;margin-top: .5vh;">www.VictoryVault.com</span>
      </div>
    </div>
  </nav>

</body>

</html>